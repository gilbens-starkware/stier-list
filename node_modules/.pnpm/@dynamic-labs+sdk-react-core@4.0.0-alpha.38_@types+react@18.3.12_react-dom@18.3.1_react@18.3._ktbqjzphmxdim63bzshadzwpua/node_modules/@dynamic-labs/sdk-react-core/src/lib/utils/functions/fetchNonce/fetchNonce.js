'use client'
import { __awaiter } from '../../../../../_virtual/_tslib.js';
import { DynamicError } from '@dynamic-labs/utils';
import { getNonce } from '../../../data/api/utils.js';
import { getEnvironmentId } from '../../../store/state/environmentId.js';

/**
 * Fetches a nonce from the backend.
 * Will throw an error if this fails.
 */
const fetchNonce = () => __awaiter(void 0, void 0, void 0, function* () {
    const nonce = yield getNonce(getEnvironmentId());
    if (!nonce) {
        throw new DynamicError('Missing nonce');
    }
    return nonce;
});

export { fetchNonce };
